<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>SMUserSession Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">StackMob iOS SDK </a></h1>
				<a id="developerHome" href="../index.html">StackMob</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">SMUserSession Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/expiration">&nbsp;&nbsp;&nbsp;&nbsp;expiration</option>
	
	<option value="//api/name/networkMonitor">&nbsp;&nbsp;&nbsp;&nbsp;networkMonitor</option>
	
	<option value="//api/name/refreshToken">&nbsp;&nbsp;&nbsp;&nbsp;refreshToken</option>
	
	<option value="//api/name/refreshing">&nbsp;&nbsp;&nbsp;&nbsp;refreshing</option>
	
	<option value="//api/name/regularOAuthClient">&nbsp;&nbsp;&nbsp;&nbsp;regularOAuthClient</option>
	
	<option value="//api/name/secureOAuthClient">&nbsp;&nbsp;&nbsp;&nbsp;secureOAuthClient</option>
	
	<option value="//api/name/tokenClient">&nbsp;&nbsp;&nbsp;&nbsp;tokenClient</option>
	
	<option value="//api/name/tokenRefreshFailureBlock">&nbsp;&nbsp;&nbsp;&nbsp;tokenRefreshFailureBlock</option>
	
	<option value="//api/name/userIdentifierMap">&nbsp;&nbsp;&nbsp;&nbsp;userIdentifierMap</option>
	
	<option value="//api/name/userPasswordField">&nbsp;&nbsp;&nbsp;&nbsp;userPasswordField</option>
	
	<option value="//api/name/userPrimaryKeyField">&nbsp;&nbsp;&nbsp;&nbsp;userPrimaryKeyField</option>
	
	<option value="//api/name/userSchema">&nbsp;&nbsp;&nbsp;&nbsp;userSchema</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/SMReadUserIdentifierMap">&nbsp;&nbsp;&nbsp;&nbsp;- SMReadUserIdentifierMap</option>
	
	<option value="//api/name/SMSaveUserIdentifierMap">&nbsp;&nbsp;&nbsp;&nbsp;- SMSaveUserIdentifierMap</option>
	
	<option value="//api/name/accessTokenHasExpired">&nbsp;&nbsp;&nbsp;&nbsp;- accessTokenHasExpired</option>
	
	<option value="//api/name/clearSessionInfo">&nbsp;&nbsp;&nbsp;&nbsp;- clearSessionInfo</option>
	
	<option value="//api/name/doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:">&nbsp;&nbsp;&nbsp;&nbsp;- doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</option>
	
	<option value="//api/name/eligibleForTokenRefresh:">&nbsp;&nbsp;&nbsp;&nbsp;- eligibleForTokenRefresh:</option>
	
	<option value="//api/name/initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:</option>
	
	<option value="//api/name/oauthClientWithHTTPS:">&nbsp;&nbsp;&nbsp;&nbsp;- oauthClientWithHTTPS:</option>
	
	<option value="//api/name/parseTokenResults:">&nbsp;&nbsp;&nbsp;&nbsp;- parseTokenResults:</option>
	
	<option value="//api/name/refreshTokenOnSuccess:onFailure:">&nbsp;&nbsp;&nbsp;&nbsp;- refreshTokenOnSuccess:onFailure:</option>
	
	<option value="//api/name/refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:">&nbsp;&nbsp;&nbsp;&nbsp;- refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</option>
	
	<option value="//api/name/saveAccessTokenInfo:">&nbsp;&nbsp;&nbsp;&nbsp;- saveAccessTokenInfo:</option>
	
	<option value="//api/name/setNewAPIHost:">&nbsp;&nbsp;&nbsp;&nbsp;- setNewAPIHost:</option>
	
	<option value="//api/name/setTokenRefreshFailureBlock:">&nbsp;&nbsp;&nbsp;&nbsp;- setTokenRefreshFailureBlock:</option>
	
	<option value="//api/name/signRequest:">&nbsp;&nbsp;&nbsp;&nbsp;- signRequest:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Initialize">Initialize</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Refreshing Session">Refreshing Session</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Internal">Internal</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/expiration">expiration</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/networkMonitor">networkMonitor</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/refreshToken">refreshToken</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/refreshing">refreshing</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/regularOAuthClient">regularOAuthClient</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/secureOAuthClient">secureOAuthClient</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/tokenClient">tokenClient</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/tokenRefreshFailureBlock">tokenRefreshFailureBlock</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/userIdentifierMap">userIdentifierMap</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/userPasswordField">userPasswordField</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/userPrimaryKeyField">userPrimaryKeyField</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/userSchema">userSchema</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/SMReadUserIdentifierMap">SMReadUserIdentifierMap</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/SMSaveUserIdentifierMap">SMSaveUserIdentifierMap</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/accessTokenHasExpired">accessTokenHasExpired</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/clearSessionInfo">clearSessionInfo</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:">doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/eligibleForTokenRefresh:">eligibleForTokenRefresh:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:">initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/oauthClientWithHTTPS:">oauthClientWithHTTPS:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/parseTokenResults:">parseTokenResults:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/refreshTokenOnSuccess:onFailure:">refreshTokenOnSuccess:onFailure:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:">refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/saveAccessTokenInfo:">saveAccessTokenInfo:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/setNewAPIHost:">setNewAPIHost:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/setTokenRefreshFailureBlock:">setTokenRefreshFailureBlock:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/signRequest:">signRequest:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="SMUserSession Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">SMUserSession Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">SMUserSession.h<br />SMUserSession.m</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>An <code>SMUserSession</code> holds all the OAuth2 credentials and configurations for the current client.  It is responsible for:</p>

<ul>
<li>Saving and clearing credentials.</li>
<li>Re-authenticating a session using a refresh token.</li>
<li>Declaring whether a given request should be https or not.</li>
</ul>
<div class="note"><p><strong>Note:</strong> You should not need to instantiate your own <code>SMUserSession</code> instance.  One is initialized when creating an <a href="../Classes/SMClient.html">SMClient</a> and is used to monitor authentication for all requests sent through that client.</p></div>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						<h3 class="subsubtitle task-title">Other Methods</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/regularOAuthClient">&nbsp;&nbsp;regularOAuthClient</a></code>
		<span class="tooltip"><p>Oauth client used for network requests over http.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/secureOAuthClient">&nbsp;&nbsp;secureOAuthClient</a></code>
		<span class="tooltip"><p>Oauth client used for network requests over https.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/tokenClient">&nbsp;&nbsp;tokenClient</a></code>
		<span class="tooltip"><p>HTTP client used for access token requests.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/networkMonitor">&nbsp;&nbsp;networkMonitor</a></code>
		<span class="tooltip"><p>Monitor for tracking current network availability.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/userIdentifierMap">&nbsp;&nbsp;userIdentifierMap</a></code>
		<span class="tooltip"><p>Map used for identifying newly created users.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/userSchema">&nbsp;&nbsp;userSchema</a></code>
		<span class="tooltip"><p>The name of the schema on StackMob used for user objects.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/userPrimaryKeyField">&nbsp;&nbsp;userPrimaryKeyField</a></code>
		<span class="tooltip"><p>The primary key field name of the user object schema on StackMob.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/userPasswordField">&nbsp;&nbsp;userPasswordField</a></code>
		<span class="tooltip"><p>The password field name of the user object schema on StackMob.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/expiration">&nbsp;&nbsp;expiration</a></code>
		<span class="tooltip"><p>The expiration date of the current session access token.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/refreshToken">&nbsp;&nbsp;refreshToken</a></code>
		<span class="tooltip"><p>The refresh token for the current session.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/refreshing">&nbsp;&nbsp;refreshing</a></code>
		<span class="tooltip"><p>A boolean flag for whether an access token refresh is in progress.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/tokenRefreshFailureBlock">&nbsp;&nbsp;tokenRefreshFailureBlock</a></code>
		<span class="tooltip"><p>Optional block to be executed whenever a token refresh request fails.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li>
						</ul>
						
						
						<a title="Initialize" name="task_Initialize"></a>
						<h3 class="subsubtitle task-title">Initialize</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:">&ndash;&nbsp;refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</a></code>
		<span class="tooltip"><p>Makes a request to refresh the current user session using the refresh token.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:">&ndash;&nbsp;initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:</a></code>
		<span class="tooltip"><p>Initialize a user session.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Refreshing Session" name="task_Refreshing Session"></a>
						<h3 class="subsubtitle task-title">Refreshing Session</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/clearSessionInfo">&ndash;&nbsp;clearSessionInfo</a></code>
		<span class="tooltip"><p>Clears out all OAuth2 associated keys.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/refreshTokenOnSuccess:onFailure:">&ndash;&nbsp;refreshTokenOnSuccess:onFailure:</a></code>
		<span class="tooltip"><p>Makes a request to refresh the current user session using the refresh token.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/setTokenRefreshFailureBlock:">&ndash;&nbsp;setTokenRefreshFailureBlock:</a></code>
		<span class="tooltip"><p>Set a block to be executed whenever a token refresh request fails.  Applies only to asynchronous methods with callbacks, called instead of the original failure block.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Internal" name="task_Internal"></a>
						<h3 class="subsubtitle task-title">Internal</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/oauthClientWithHTTPS:">&ndash;&nbsp;oauthClientWithHTTPS:</a></code>
		<span class="tooltip"><p>Returns an instance of <code>SMOAuth2Client</code> configured to make requests over http or https.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:">&ndash;&nbsp;doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</a></code>
		<span class="tooltip"><p>Sends a request to get an access token from the server for a given user session.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/parseTokenResults:">&ndash;&nbsp;parseTokenResults:</a></code>
		<span class="tooltip"><p>Parses the access token information out of an /accessToken or /refreshToken response.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/saveAccessTokenInfo:">&ndash;&nbsp;saveAccessTokenInfo:</a></code>
		<span class="tooltip"><p>Save the access token information from an /accessToken or /refreshToken response locally to the device.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/signRequest:">&ndash;&nbsp;signRequest:</a></code>
		<span class="tooltip"><p>Signs the request.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/eligibleForTokenRefresh:">&ndash;&nbsp;eligibleForTokenRefresh:</a></code>
		<span class="tooltip"><p>Whether the calling session is eligible to perform an access token refresh request.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/SMReadUserIdentifierMap">&ndash;&nbsp;SMReadUserIdentifierMap</a></code>
		<span class="tooltip"><p>Internal method used to read a file which maps users to unique strings.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/SMSaveUserIdentifierMap">&ndash;&nbsp;SMSaveUserIdentifierMap</a></code>
		<span class="tooltip"><p>Internal method used to save a file which maps users to unique strings.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/accessTokenHasExpired">&ndash;&nbsp;accessTokenHasExpired</a></code>
		<span class="tooltip"><p>Internal method used by <code>SMUserSession</code> to check if the expiration date on the current access token has expired.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/setNewAPIHost:">&ndash;&nbsp;setNewAPIHost:</a></code>
		<span class="tooltip"><p>Internal method used for changing API hosts, triggered by <code>SMClient</code>.</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/expiration" title="expiration"></a>
	<h3 class="subsubtitle method-title">expiration</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The expiration date of the current session access token.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, copy) NSDate *expiration</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/networkMonitor" title="networkMonitor"></a>
	<h3 class="subsubtitle method-title">networkMonitor</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Monitor for tracking current network availability.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, readwrite, strong) SMNetworkReachability *networkMonitor</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.1.3 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/refreshToken" title="refreshToken"></a>
	<h3 class="subsubtitle method-title">refreshToken</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The refresh token for the current session.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, copy) NSString *refreshToken</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/refreshing" title="refreshing"></a>
	<h3 class="subsubtitle method-title">refreshing</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>A boolean flag for whether an access token refresh is in progress.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (atomic) BOOL refreshing</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/regularOAuthClient" title="regularOAuthClient"></a>
	<h3 class="subsubtitle method-title">regularOAuthClient</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Oauth client used for network requests over http.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, readwrite, strong) SMOAuth2Client *regularOAuthClient</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/secureOAuthClient" title="secureOAuthClient"></a>
	<h3 class="subsubtitle method-title">secureOAuthClient</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Oauth client used for network requests over https.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, readwrite, strong) SMOAuth2Client *secureOAuthClient</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/tokenClient" title="tokenClient"></a>
	<h3 class="subsubtitle method-title">tokenClient</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>HTTP client used for access token requests.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, readwrite, strong) AFHTTPClient *tokenClient</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/tokenRefreshFailureBlock" title="tokenRefreshFailureBlock"></a>
	<h3 class="subsubtitle method-title">tokenRefreshFailureBlock</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Optional block to be executed whenever a token refresh request fails.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (readonly, nonatomic, copy) SMTokenRefreshFailureBlock tokenRefreshFailureBlock</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.4.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/userIdentifierMap" title="userIdentifierMap"></a>
	<h3 class="subsubtitle method-title">userIdentifierMap</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Map used for identifying newly created users.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, strong) NSMutableDictionary *userIdentifierMap</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.1.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/userPasswordField" title="userPasswordField"></a>
	<h3 class="subsubtitle method-title">userPasswordField</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The password field name of the user object schema on StackMob.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, copy) NSString *userPasswordField</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.1.1 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/userPrimaryKeyField" title="userPrimaryKeyField"></a>
	<h3 class="subsubtitle method-title">userPrimaryKeyField</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The primary key field name of the user object schema on StackMob.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, copy) NSString *userPrimaryKeyField</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.1.1 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/userSchema" title="userSchema"></a>
	<h3 class="subsubtitle method-title">userSchema</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The name of the schema on StackMob used for user objects.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, copy) NSString *userSchema</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/SMReadUserIdentifierMap" title="SMReadUserIdentifierMap"></a>
	<h3 class="subsubtitle method-title">SMReadUserIdentifierMap</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Internal method used to read a file which maps users to unique strings.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)SMReadUserIdentifierMap</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.1.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/SMSaveUserIdentifierMap" title="SMSaveUserIdentifierMap"></a>
	<h3 class="subsubtitle method-title">SMSaveUserIdentifierMap</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Internal method used to save a file which maps users to unique strings.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)SMSaveUserIdentifierMap</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.1.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/accessTokenHasExpired" title="accessTokenHasExpired"></a>
	<h3 class="subsubtitle method-title">accessTokenHasExpired</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Internal method used by <code>SMUserSession</code> to check if the expiration date on the current access token has expired.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (BOOL)accessTokenHasExpired</code></div>

    
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> if the current access token has expired, otherwise <code>NO</code>.</p>
	</div>
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/clearSessionInfo" title="clearSessionInfo"></a>
	<h3 class="subsubtitle method-title">clearSessionInfo</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Clears out all OAuth2 associated keys.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)clearSessionInfo</code></div>

    
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:" title="doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:"></a>
	<h3 class="subsubtitle method-title">doTokenRequestWithEndpoint:credentials:options:successCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Sends a request to get an access token from the server for a given user session.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)doTokenRequestWithEndpoint:(NSString *)<em>endpoint</em> credentials:(NSDictionary *)<em>credentials</em> options:(SMRequestOptions *)<em>options</em> successCallbackQueue:(dispatch_queue_t)<em>successCallbackQueue</em> failureCallbackQueue:(dispatch_queue_t)<em>failureCallbackQueue</em> onSuccess:(void ( ^ ) ( NSDictionary *userObject ))<em>successBlock</em> onFailure:(void ( ^ ) ( NSError *error ))<em>failureBlock</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>endpoint</em></dt>
			<dd><p>The endpoint to hit depending on whether we are asking for a new access token or refreshing a current session.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>credentials</em></dt>
			<dd><p>The credentials needed to authenticate the user.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>options</em></dt>
			<dd><p>An instance of SMRequestOptions.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>successCallbackQueue</em></dt>
			<dd><p>The queue to perform successBlock on.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>failureCallbackQueue</em></dt>
			<dd><p>The queue to perform failureBlock on.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>successBlock</em></dt>
			<dd><p>Upon success provides the user object.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>failureBlock</em></dt>
			<dd><p>Upon failure to refresh the session, provides the error.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/eligibleForTokenRefresh:" title="eligibleForTokenRefresh:"></a>
	<h3 class="subsubtitle method-title">eligibleForTokenRefresh:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Whether the calling session is eligible to perform an access token refresh request.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (BOOL)eligibleForTokenRefresh:(SMRequestOptions *)<em>options</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>options</em></dt>
			<dd><p>The tryRefreshToken property is used.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>Whether the calling session is eligible to perform an access token refresh request.</p>
	</div>
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.2.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:" title="initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:"></a>
	<h3 class="subsubtitle method-title">initWithAPIVersion:apiHost:publicKey:userSchema:userPrimaryKeyField:userPasswordField:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Initialize a user session.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (id)initWithAPIVersion:(NSString *)<em>version</em> apiHost:(NSString *)<em>apiHost</em> publicKey:(NSString *)<em>publicKey</em> userSchema:(NSString *)<em>userSchema</em> userPrimaryKeyField:(NSString *)<em>userPrimaryKeyField</em> userPasswordField:(NSString *)<em>userPasswordField</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>version</em></dt>
			<dd><p>The API version of your StackMob application which this client instance should use.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>apiHost</em></dt>
			<dd><p>The host to connect to for API requests.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>publicKey</em></dt>
			<dd><p>Your StackMob application&rsquo;s OAuth2 public key.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>userSchema</em></dt>
			<dd><p>The StackMob schema that has been flagged as a user object. Default is <code>@"user"</code>.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>userPrimaryKeyField</em></dt>
			<dd><p>The StackMob primary key field name for the user object schema. Default is <code>@"username"</code>.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>userPasswordField</em></dt>
			<dd><p>The StackMob field name for the password. Default is <code>@"password"</code>.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>An instance of <code>SMUserSession</code> configured with the provided settings.</p>
	</div>
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/oauthClientWithHTTPS:" title="oauthClientWithHTTPS:"></a>
	<h3 class="subsubtitle method-title">oauthClientWithHTTPS:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns an instance of <code>SMOAuth2Client</code> configured to make requests over http or https.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (id)oauthClientWithHTTPS:(BOOL)<em>https</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>https</em></dt>
			<dd><p><code>YES</code> is the client should be configured to make requests over https, <code>NO</code> for http.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>An instance of <code>SMOAuth2Client</code> configured according to the value of https.</p>
	</div>
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/parseTokenResults:" title="parseTokenResults:"></a>
	<h3 class="subsubtitle method-title">parseTokenResults:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Parses the access token information out of an /accessToken or /refreshToken response.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (NSDictionary *)parseTokenResults:(NSDictionary *)<em>result</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>result</em></dt>
			<dd><p>The <code>NSDictionary</code> to parse.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>A new <code>NSDictionary</code> containing the access token information.</p>
	</div>
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/refreshTokenOnSuccess:onFailure:" title="refreshTokenOnSuccess:onFailure:"></a>
	<h3 class="subsubtitle method-title">refreshTokenOnSuccess:onFailure:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Makes a request to refresh the current user session using the refresh token.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)refreshTokenOnSuccess:(void ( ^ ) ( NSDictionary *userObject ))<em>successBlock</em> onFailure:(void ( ^ ) ( NSError *error ))<em>failureBlock</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>successBlock</em></dt>
			<dd><p>Upon success provides the user object.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>failureBlock</em></dt>
			<dd><p>Upon failure to refresh the session, provides the error.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Callback blocks are performed on the main thread.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:" title="refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:"></a>
	<h3 class="subsubtitle method-title">refreshTokenWithSuccessCallbackQueue:failureCallbackQueue:onSuccess:onFailure:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Makes a request to refresh the current user session using the refresh token.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)refreshTokenWithSuccessCallbackQueue:(dispatch_queue_t)<em>successCallbackQueue</em> failureCallbackQueue:(dispatch_queue_t)<em>failureCallbackQueue</em> onSuccess:(void ( ^ ) ( NSDictionary *userObject ))<em>successBlock</em> onFailure:(void ( ^ ) ( NSError *error ))<em>failureBlock</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>successCallbackQueue</em></dt>
			<dd><p>The queue to perform successBlock on.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>failureCallbackQueue</em></dt>
			<dd><p>The queue to perform failureBlock on.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>successBlock</em></dt>
			<dd><p>Upon success provides the user object.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>failureBlock</em></dt>
			<dd><p>Upon failure to refresh the session, provides the error.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.2.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/saveAccessTokenInfo:" title="saveAccessTokenInfo:"></a>
	<h3 class="subsubtitle method-title">saveAccessTokenInfo:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Save the access token information from an /accessToken or /refreshToken response locally to the device.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)saveAccessTokenInfo:(NSDictionary *)<em>result</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>result</em></dt>
			<dd><p>The response to save.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/setNewAPIHost:" title="setNewAPIHost:"></a>
	<h3 class="subsubtitle method-title">setNewAPIHost:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Internal method used for changing API hosts, triggered by <code>SMClient</code>.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)setNewAPIHost:(NSString *)<em>apiHost</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>apiHost</em></dt>
			<dd><p>The new host.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/setTokenRefreshFailureBlock:" title="setTokenRefreshFailureBlock:"></a>
	<h3 class="subsubtitle method-title">setTokenRefreshFailureBlock:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Set a block to be executed whenever a token refresh request fails.  Applies only to asynchronous methods with callbacks, called instead of the original failure block.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)setTokenRefreshFailureBlock:(void ( ^ ) ( NSError *error , SMFailureBlock originalFailureBlock ))<em>block</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>block</em></dt>
			<dd><p>An SMTokenRefreshFailureBlock instance.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.4.0 and later.</p>
	</div>
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>The SDK has automatic token refresh built in, but sometimes this refresh fails because the refresh token is no longer valid, etc.  At this point the client needs to reset the session, the easiest way being prompting the user to re-login. This convenience method provides the ability to define a block to be executed whenever an attempt to refresh the current session access token fails.  This block will be executed in place of the original failure block provided.</p>

<p>It is recommended in your block to clear the local session information and present the user with a login screen.  Once logged in, dismiss the login screen and continue normal execution of the application.  Doing so using this block avoids code redundancy throughout the application.</p>

<p>The block passes two parameters, the error (some type of token refresh error), and the original failure block converted to <code>SMFailureBlock</code> form.  This gives you the option to call the original failure block if you wish.</p>

<p>In the following example, if the fetch failed because there was an error refreshing the session access token, the refresh token failure block would get called instead:</p>

<pre><code>// Set refresh token failure block, probably during application initialization.
// If you are accessing instance variables or calling self methods,
// you may need to declare a __block or __weak self variable to avoid retain cycle warnings.
// Here is a good Stack Overflow article addressing the issue: http://stackoverflow.com/questions/4352561/retain-cycle-on-self-with-blocks

__block id blockSelf = self;
__block SMUserSession *currentSession = self.client.session;
[self.client setTokenRefreshFailureBlock:^(NSError *error, SMFailureBlock originalFailureBlock) {
    // Reset local session info
    [currentSession clearSessionInfo];

    // Show custom login screen
    [blockSelf showLoginScreen];

    // Optionally call original failure block
    originalFailureBlock(error);
}];

// Somewhere in application execution
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Todo"];

// execute the request
[self.managedObjectContext executeFetchRequest:fetchRequest onSuccess:^(NSArray *results) {
    [self doSomethingWithResults:results];
} onFailure:^(NSError *error) {
    NSLog(@"Error fetching: %@", error);
}];
</code></pre>

<p><strong>Note:</strong> Block execution applies only to asynchronous methods with callbacks.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/signRequest:" title="signRequest:"></a>
	<h3 class="subsubtitle method-title">signRequest:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Signs the request.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (NSURLRequest *)signRequest:(NSURLRequest *)<em>request</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>request</em></dt>
			<dd><p>The request to sign.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The signed request.</p>
	</div>
	
	
	
	<div class="method-subsection availability">
		<h4 class="method-subtitle parameter-title">Availability</h4>
		<p>Available in iOS SDK 1.0.0 and later.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SMUserSession.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 StackMob. All rights reserved. (Last updated: 2013-08-21)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>