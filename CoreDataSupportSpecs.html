<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>StackMob iOS SDK Reference</title>
		<link rel="stylesheet" type="text/css" href="css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<style>
	.leftmap 
	{
	float:left;
	margin-right:100px;
	}
	.rightmap
	{
	float:left;
	}
	.clearmap
	{
	clear:both;
	}
	</style>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="index.html">StackMob iOS SDK </a></h1>
				<a id="developerHome" href="index.html">StackMob</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">StackMob iOS SDK Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<div id="overview_contents" role="main">
				<div class="main-navigation navigation-top">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">StackMob <--> Core Data Support Specifications</h1>
					</div>		
				</div>
				<div id="container">
					
					<div class="section section-overview index-overview">
<h2>Overview</h2>

<p>As part of the integration between StackMob and Core Data, our goal is to support as much Core Data functionality as we can, including attribute types, fetch request settings and predicate formats.</p>
<p>As we continually improve our SDK this page will stay up to date with everything that is currently supported.</p>
<p>Features without date to indicate starting support date are assumed v1.0.0+</p>

<a name="data_type_maps"></a>
<h2>Data Type Maps</h2>

<div class="leftmap">

<h3>Core Data Attribute Type -> StackMob Field Type</h3> 

<table cellpadding="8px" width="600px">
    <tr align="center">
        <th>Core Data Attribute Type</th>
        <th>StackMob Field Type</th>
    </tr>
    <tr>
        <td>Integer 16</td>
        <td>Integer</td>
    </tr>
    <tr>
        <td>Integer 32</td>
        <td>Integer</td>
    </tr>
    <tr>
        <td>Integer 64</td>
        <td>Integer</td>
    </tr>
    <tr>
        <td>Decimal</td>
        <td>Float</td>
    </tr>
    <tr>
        <td>Double</td>
        <td>Float</td>
    </tr>
    <tr>
        <td>Float</td>
        <td>Float</td>
    </tr>
    <tr>
        <td>String</td>
        <td>String, Binary (see <a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMBinaryDataConversion.html">SMBinaryDataConversion</a>)</td>
    </tr>
    <tr>
        <td>Boolean <i>(v1.1.1+)</i></td>
        <td>Boolean</td>
    </tr>
    <tr>
        <td>NSDate</td>
        <td>Integer, Representing the number of milliseconds since 1970</td>
    </tr>
    <tr>
        <td>Binary Data</td>
        <td>Currently Not Supported</td>
    </tr>
    <tr>
        <td>Transformable <i>(v1.3.0+)</i></td>
        <td>Geopoint (lat/lon) - See <a href="https://developer.stackmob.com/tutorials/ios/Saving-Geo-Location-Data">Saving Geo Location Data Tutorial</td>
    </tr>
</table>
</div>

<div class="rightmap">

<h3>StackMob Field Type -> Core Data Attribute Type</h3>

<table cellpadding="8px" width="600px">
    <tr align="center">
        <th>StackMob Field Type</th>
        <th>Core Data Attribute Type</th>
    </tr>
    <tr>
        <td>String</td>
        <td>String</td>
    </tr>
    <tr>
        <td>Integer</td>
        <td>Integer 16, 32, & 64</td>
    </tr>
    <tr>
        <td>Float</td>
        <td>Decimal</td>
    </tr>
    <tr>
        <td>Boolean</td>
        <td>Boolean</td>
    </tr>
    <tr>
        <td>Array</td>
        <td>Currently not supported with Core Data, use the Datastore API (See <a href="https://developer.stackmob.com/tutorials/ios/Lower-Level-CRUD-API">Lower Level CRUD API Tutorial</a>)</td>
    </tr>
    <tr>
        <td>Binary</td>
        <td>String</td>
    </tr>
    <tr>
        <td>Geopoint (lat/lon) <i>(v1.3.0+)</i></td>
        <td>Transformable - See <a href="https://developer.stackmob.com/tutorials/ios/Saving-Geo-Location-Data">Saving Geo Location Data Tutorial</a></td>
    </tr>
</table>

</div>

<div class="clearmap"></div>
<a name="entity_naming_conventions"></a>
<h2>Entity and Property Naming Conventions</h2>

<h3>Entities</h3>

<p>Entities should be one word, starting with a capital letter.  The schema name will appear on StackMob as all lowercase.</p>
<p>When using the Datastore API alongside the Core Data integration you may refer to the schema by its corresponding Entity name.  For example, you may call <i>createObject:inSchema:onSuccess:onFailure:</i> and provide @"Todo" as the schema, even though the schema appears on StackMob as "todo".</p><br/>

<h3>Properties (Attributes and Relationships):</h3>

<p>Suppose we want an attribute describing the year someone was born.  The name in your data model may be in one of the following formats:</p>
<ul>
	<li>Core Data preferred camelCase: <strong>yearBorn</strong></li>
	<li>StackMob (lowercase with optional underscores): <strong>year_born</strong></li>
	<li>All lowercase: <strong>yearborn</strong></li>
</ul>

<p>All camelCase Core Data property names will appear on StackMob as their formatted equivalents.  Therefore, the Core Data property <strong>yearBorn</strong> will appear on StackMob as <strong>year_born</strong>.
<p>All translation is done by the SDK when using the Core Data integration. Thus, the only time you will need to refer to fields by the name that appears on StackMob is when using the <a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMDataStore.html">Datastore API</a>.</p>

<a name="fetch_request"></a>
<h2>Fetch Requests</h2>

<p>Support Table is based on <code>NSFetchRequest</code> methods.  Additional support, especially in regards to managing how results are returned, is planned for future releases.</p>
<table cellpadding="8px" width="600px">
    <tr align="center">
        <th>NSFetchRequest method</th>
        <th>Supported</th>
    </tr>
    <tr>
        <td>fetchRequestWithEntityName:</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>entityName / initWithEntityName:</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>entity / setEntity:</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>includesSubentities / setIncludesSubEntities:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>predicate / setPredicate:</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>fetchLimit / setFetchLimit:</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>fetchOffset / setFetchOffset:</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>fetchBatchSize / setFetchBatchSize:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>affectedStores / setAffectedStores:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>sortDescriptors / setSortDescriptors:</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>relationshipKeyPathsForPrefetching / setRelationshipKeyPathsForPrefetching:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>resultType / setResultType:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>includesPendingChanges / setIncludesPendingChanges:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>propertiesToFetch / setPropertiesToFetch:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>returnsDistinctRestults / setReturnsDistinctResults:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>includesPropertyValues / setIncludesPropertyValues:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>shouldRefreshRefetchedObjects / setShouldRefreshRefetchedObjects:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>returnObjectsAsFaults / setReturnObjectsAsFaults:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>propertiesToGroupBy / setPropertiesToGroupBy:</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>havingPredicate / setHavingPredicate:</td>
        <td>NO</td>
    </tr>
    
</table>

<b>Additional Supported Features:</b>
<ul>
	<li>Fetch Entity with predicates where "relationship key == managed object or managed object ID". <b>Important:</b> Predicate supported only for comparion predicates and to-one relationships.</li>
</ul>
<b>Not Supported</b>
<ul>
	<li>Fetching Entity with key paths in predicate, i.e. "relationshipKey.attribute == value".</li>
	<li>Fetching Geo-point data from the cache.</li>
</ul>

<a name="predicates"></a>
<h2>Predicates</h2>

<h3>Comparison Predicates</h3>

<p>Predicate's <b>leftExpression</b> must be of type <b>NSKeyPathExpressionType</b>.</p>
<p>Predicate's <b>rightExpression</b> must be of type <b>NSConstantValueExpressionType</b>.</p>

<p>Supported Predicate Operator Types: (based on NSPredicateOperatorType)</p>
<table cellpadding="8px" width="600px">
    <tr align="center">
        <th>NSPredicateOperatorType</th>
        <th>Supported</th>
    </tr>
    <tr>
        <td>NSLessThanPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>NSLessThanOrEqualToPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>NSGreaterThanPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>NSGreaterThanOrEqualToPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>NSEqualToPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>NSNotEqualToPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>NSMatchesPredicateOperatorType</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>NSLikePredicateOperatorType</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>NSBeginsWithPredicateOperatorType</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>NSEndsWithPredicateOperatorType</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>NSInPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>
    <tr>
        <td>NSCustomSelectorPredicateOperatorType</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>NSContainsPredicateOperatorType</td>
        <td>NO</td>
    </tr>
    <tr>
        <td>NSBetweenPredicateOperatorType</td>
        <td><b>YES</b></td>
    </tr>

</table>

<h3>Compound Predicates</h3>
<p>For a tutorial on using compound predicates see the <a href="https://developer.stackmob.com/tutorials/ios/Advanced-Queries" target="_blank">Advanced Query Tutorial</a>.
<ul>
	<li>NSAndPredicateType - Use [NSPredicate andPredicateWithSubpredicates:arrayOfPredicates] or AND in predicate format string.</li>
	<li>NSORPredicateType - Use [NSPredicate orPredicateWithSubpredicates:arrayOfPredicates] or OR in predicate format string.</li>
</ul>

<h2>User Objects</h2>

<p>To create proper user objects, create an entity matching your StackMob schema used for user objects.  For example purposes we will use User.</p>
<p>Add the appropriate fields, leaving password out (we don't want to store the user's password directly through Core Data).</p>
<p>Create a managed object subclass.  In the header file import <code>StackMob.h</code> and change the class inheritance from <code>NSManagedObject</code> to <code>SMUserManagedObject</code>.</p>
<p>If you wish to declare a custom init function, do so as well.</p>
<p>Your header file will look something like:</p>

<pre><code>
#import "StackMob.h"

@interface User : SMUserManagedObject

@property (nonatomic, retain) NSString * username;
@property (nonatomic, retain) NSString * email;

@end
</code></pre>

<a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMUserManagedObject.html" target="_blank">SMUserManagedObject</a> provides a few helper methods, including a method to set the password as well as an init function that must be called in any custom init implementation.


<h2>Geo-Data <i>(v1.3.0+)</i></h2>

<p><a href="http://developer.stackmob.com/tutorials/ios/Saving-Geo-Location-Data" target="_blank">Save Geo-location data in your managed objects.</a></p>
<p><a href="http://developer.stackmob.com/tutorials/ios/Querying-Geo-Location-Data" target="_blank">Query Geo-location data using fetch requests.</a></p>


<h2>Concurrency API <i>(v1.2.0+)</i></h2>

<p>The concurrency API brings a new set of asynchronous and synchronous operations to Core Data.  All methods follow patterns to execute saves and fetches on background queues on private contexts.  It is recommended to use these methods to achieve optimal performance between Core Data, StackMob and the local caching system.</p>

<p>All methods can be found in the <a href="http://stackmob.github.io/stackmob-ios-sdk/Categories/NSManagedObjectContext+Concurrency.html" target="_blank">SMManagedObjectContext+Concurrency Class Reference</a>.</p>

<h2>Global and Per-Request Options <i>(v1.3.0+)</i></h2>

<p>Define and set a custom instance of `SMRequestOptions` for Core Data to use when sending requests to StackMob.</p>
<p>Default options as well as per-operation (save/fetch) options can be set.</p>
<p>Currently, only the HTTPS setting is honored.</p>
<p>Global request options property found in <a href="http://stackmob.github.io/stackmob-ios-sdk/Classes/SMCoreDataStore.html#//api/name/globalRequestOptions" target="_blank">SMCoreDataStore</a>.</p>
<p>Per-operation request options parameter available using <a href="http://stackmob.github.io/stackmob-ios-sdk/Categories/NSManagedObjectContext+Concurrency.html" target="_blank">Concurrency API methods, Per Request Options section</a>.<p>

					
				</div>
				<div class="main-navigation navigation-bottom">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2012 StackMob. All rights reserved. (Last updated: 2012-11-20)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
	
					</div>
				</div>
			</div>
		</article>		
	</body>
</html>